<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Personal Website</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --green-500: #2ecc71;
      --green-600: #22c55e;
      --black: #0b0b0b;
      --muted-black: #111827;
      --card-white:#ffffff;
      --surface: #0f1723;
      --radius: 14px;
      --max-w:1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:var(--card-white);background:linear-gradient(180deg,var(--surface),#071019);}
    header{max-width:var(--max-w);margin:18px auto;padding:14px;background:linear-gradient(90deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));border-radius:12px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;background:linear-gradient(135deg,var(--green-500),var(--green-600));border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--black);font-size:18px}
    h1{margin:0;font-size:18px;color:var(--card-white);letter-spacing:0.2px}
    .tag{font-size:12px;color:rgba(255,255,255,0.75)}
    nav a{color:rgba(255,255,255,0.82);text-decoration:none;margin-left:12px;font-weight:600}
    .wrap{max-width:var(--max-w);margin:20px auto;padding:18px;display:grid;grid-template-columns:1fr 360px;gap:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));border-radius:var(--radius);padding:16px;box-shadow:0 8px 24px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.04)}
    .card.white{background:var(--card-white);color:var(--muted-black);border:1px solid rgba(15,23,42,0.06)}
    .section-title{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
    .section-title h2{margin:0;font-size:16px}
    .muted{font-size:13px;color:rgba(255,255,255,0.7)}
    label{display:block;font-size:13px;margin-bottom:6px;color:rgba(255,255,255,0.9)}
    input,select,textarea{width:100%;padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.04);color:var(--card-white);outline:none}
    input::placeholder,textarea::placeholder{color:rgba(255,255,255,0.45)}
    textarea{resize:vertical}
    .row{display:flex;gap:10px}
    .row > *{flex:1}
    .btn{display:inline-flex;gap:8px;align-items:center;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,var(--green-500),var(--green-600));color:var(--black);font-weight:700;border:none;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--card-white);font-weight:600}
    .list{max-height:420px;overflow:auto;margin-top:10px;padding-right:6px}
    .item{padding:12px;border-radius:12px;margin-bottom:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);display:flex;justify-content:space-between;align-items:center}
    .meta{font-size:12px;color:rgba(255,255,255,0.7)}
    aside .card{position:sticky;top:20px}
    footer{max-width:var(--max-w);margin:22px auto;padding:12px;color:rgba(255,255,255,0.6);text-align:center;font-size:13px}
    @media (max-width:980px){.wrap{grid-template-columns:1fr;padding:12px}header{margin:12px}aside .card{position:static}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">PW</div>
      <div>
        <h1>Personal Website</h1>
        <div class="tag">Manage money ‚Ä¢ schedule ‚Ä¢ reminders ‚Ä¢ notes</div>
      </div>
    </div>
    <nav>
      <a href="#money">Money</a>
      <a href="#time">Time</a>
      <a href="#reminders">Reminders</a>
      <a href="#notes">Notes</a>
    </nav>
  </header>

  <main class="wrap">
    <section>
      <div id="money" class="card">
        <div class="section-title"><h2>üí∏ Money Management</h2><div class="muted">Log pemasukan, pengeluaran, tabungan, gadai, emergency</div></div>

        <form id="moneyForm">
          <label>Jenis</label>
          <select id="moneyType"><option value="income">Pemasukan</option><option value="expense">Pengeluaran</option><option value="saving">Tabungan/Investasi</option><option value="gadai">Gadai</option><option value="emergency">Emergency</option></select>

          <div id="dynamicFields" style="margin-top:12px"></div>

          <div style="display:flex;gap:10px;margin-top:12px">
            <button class="btn" type="submit">Simpan</button>
            <button id="exportMoney" type="button" class="btn ghost">Export CSV</button>
          </div>
        </form>

        <div style="margin-top:14px">
          <div class="muted">Entries</div>
          <div id="moneyList" class="list"></div>
        </div>
      </div>

      <div class="card" style="margin-top:18px">
        <div class="section-title"><h2>‚è±Ô∏è Time Management</h2><div class="muted">Daily ‚Üí Weekly ‚Üí Monthly schedules + work/play/class slots</div></div>

        <form id="timeForm">
          <label>Judul / Aktivitas</label>
          <input id="timeTitle" placeholder="Contoh: Kerja shift / Kuliah" />

          <div class="row" style="margin-top:8px">
            <div>
              <label>Mulai</label>
              <input id="timeStart" type="datetime-local" />
            </div>
            <div>
              <label>Selesai (opsional)</label>
              <input id="timeEnd" type="datetime-local" />
            </div>
          </div>

          <label style="margin-top:8px">Ulangi</label>
          <select id="timeRepeat"><option value="none">Sekali</option><option value="daily">Harian</option><option value="weekly">Mingguan</option><option value="monthly">Bulanan</option></select>

          <div style="display:flex;gap:8px;margin-top:12px">
            <button class="btn" type="submit">Simpan Jadwal</button>
            <button id="addToCalendar" type="button" class="btn ghost">Tambah ke Kalender</button>
            <button id="exportICSBtn" type="button" class="btn ghost">Download .ics</button>
          </div>

        </form>

        <div style="margin-top:14px">
          <div class="muted">Schedule</div>
          <div id="timeList" class="list"></div>
        </div>
      </div>

      <div id="reminders" class="card" style="margin-top:18px">
        <div class="section-title"><h2>üîî Reminders & Alarm</h2><div class="muted">Browser-based reminders and simple alarms</div></div>

        <form id="reminderForm">
          <label>Pesan</label>
          <input id="remMsg" placeholder="Contoh: Bayar tagihan" />
          <div class="row" style="margin-top:8px">
            <div><label>Waktu</label><input id="remAt" type="datetime-local" /></div>
            <div><label>Sound</label><select id="remSound"><option value="on">On</option><option value="off">Off</option></select></div>
          </div>
          <div style="display:flex;gap:8px;margin-top:12px">
            <button class="btn" type="submit">Set Reminder</button>
            <button id="testNotif" type="button" class="btn ghost">Test Notif</button>
          </div>
        </form>

        <div style="margin-top:14px">
          <div class="muted">Active Reminders</div>
          <div id="remList" class="list"></div>
        </div>
      </div>

    </section>

    <aside>
      <div id="notes" class="card white">
        <div class="section-title"><h2>üóí Notes (iOS/Android)</h2><div class="muted">Share ke Notes via Web Share atau download .txt</div></div>

        <label>Judul</label>
        <input id="noteTitle" placeholder="Judul catatan" />
        <label style="margin-top:8px">Isi</label>
        <textarea id="noteContent" rows="6" placeholder="Isi catatan..."></textarea>

        <div style="display:flex;gap:8px;margin-top:10px">
          <button id="saveNote" class="btn">Simpan</button>
          <button id="shareNote" class="btn ghost">Share / Send</button>
        </div>

        <div style="margin-top:12px">
          <div class="muted">Saved Notes</div>
          <div id="notesList" class="list" style="max-height:220px;color:var(--muted-black)"></div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <div class="section-title"><h2>Quick Tips</h2><div class="muted">Integrations</div></div>
        <ul style="margin:0;padding-left:18px;color:rgba(255,255,255,0.85)">
          <li>Tambah ke Google Calendar: tombol "Tambah ke Kalender" (membuka Google Calendar).</li>
          <li>iPhone: gunakan tombol Share ‚Üí pilih Notes atau Save to Files.</li>
          <li>Export CSV untuk backup data.</li>
          <li>Notifikasi butuh izin browser.</li>
        </ul>
      </div>
    </aside>

  </main>
  <footer>Built for you ‚Äî localStorage-based. Export data to keep backups.</footer>

  <script>
    const $ = id => document.getElementById(id);
    function fmtDate(d){ if(!d) return ''; try { return new Date(d).toLocaleString() } catch(e){return d} }

    const moneyType = $('moneyType'), dynamic = $('dynamicFields'), moneyForm = $('moneyForm'), moneyList = $('moneyList');
    function makeFields(type){ dynamic.innerHTML = ''; 
      if(type==='income'){
        dynamic.innerHTML = `
          <label>Sumber</label><input id="m_source" placeholder="Contoh: Gaji, Jualan" />
          <div class="row"><div><label>Jumlah (Rp)</label><input id="m_amount" type="number" /></div><div><label>Tanggal & Jam</label><input id="m_date" type="datetime-local" /></div></div>
          <label>Metode</label><select id="m_method"><option>Cash</option><option>m-banking</option></select>
          <label>Bank / Aplikasi (opsional)</label><input id="m_bank" placeholder="Contoh: BCA, OVO" />
        `;
      } else if(type==='expense'){
        dynamic.innerHTML = `
          <label>Untuk apa / Tujuan</label><input id="m_purpose" placeholder="Contoh: Beli bahan" />
          <div class="row"><div><label>Jumlah (Rp)</label><input id="m_amount" type="number" /></div><div><label>Tanggal & Jam</label><input id="m_date" type="datetime-local" /></div></div>
          <label>Metode</label><select id="m_method"><option>Cash</option><option>m-banking</option></select>
          <label>Bank / Aplikasi (opsional)</label><input id="m_bank" placeholder="Contoh: Dana, BCA" />
        `;
      } else if(type==='saving'){
        dynamic.innerHTML = `
          <label>Tabung / Investasi di mana</label><input id="m_where" placeholder="Contoh: Bank BRI, Aplikasi X" />
          <div class="row"><div><label>Jumlah (Rp)</label><input id="m_amount" type="number" /></div><div><label>Metode</label><select id="m_method"><option>Cash</option><option>m-banking</option></select></div></div>
        `;
      } else if(type==='gadai'){
        dynamic.innerHTML = `
          <label>Gadai di mana</label><input id="m_where" placeholder="Nama tempat gadai" />
          <label>Jaminan</label><input id="m_collateral" placeholder="Mis: HP, Emas" />
          <div class="row"><div><label>Total Gadai (Rp)</label><input id="m_amount" type="number" /></div><div><label>Tanggal/Jatuh tempo</label><input id="m_date" type="datetime-local" /></div></div>
        `;
      } else if(type==='emergency'){
        dynamic.innerHTML = `
          <div class="row"><div><label>Jumlah Emergency (Rp)</label><input id="m_amount" type="number" /></div><div><label>Metode</label><select id="m_method"><option>Cash</option><option>m-banking</option></select></div></div>
        `;
      }
    }
    moneyType.addEventListener('change', e=> makeFields(e.target.value));
    makeFields(moneyType.value);

    function loadMoney(){ const data = JSON.parse(localStorage.getItem('moneyData')||'[]'); moneyList.innerHTML=''; data.slice().reverse().forEach(d=>{
      const el=document.createElement('div'); el.className='item';
      el.innerHTML = '<div style="min-width:0"><strong style="color:var(--green-500)">' + (d.type||'').toUpperCase() + '</strong><div class="meta">' + (d.title||d.purpose||d.where||'') + '</div></div><div style="text-align:right"><div style="font-weight:700">Rp ' + (d.amount||'-') + '</div><div class="meta">' + fmtDate(d.when) + '</div></div>';
      moneyList.appendChild(el);
    })}
    loadMoney();

    moneyForm.addEventListener('submit', e=>{ e.preventDefault(); const type = moneyType.value; const base={type}; const amount = document.getElementById('m_amount')?.value; const when = document.getElementById('m_date')?.value; const method = document.getElementById('m_method')?.value; const bank = document.getElementById('m_bank')?.value; const title = (type==='income')?document.getElementById('m_source')?.value : ((type==='expense')?document.getElementById('m_purpose')?.value : document.getElementById('m_where')?.value);
      base.amount = amount || '';
      base.when = when || new Date().toISOString();
      base.method = method || '';
      base.bank = bank || '';
      base.title = title || '';
      if(type==='gadai'){ base.collateral = document.getElementById('m_collateral')?.value || '' }
      const arr = JSON.parse(localStorage.getItem('moneyData')||'[]'); arr.push(base); localStorage.setItem('moneyData',JSON.stringify(arr)); loadMoney(); moneyForm.reset(); makeFields(moneyType.value);
    })

    // safe CSV export using array.join('
')
    $('exportMoney').addEventListener('click', ()=>{
      const data = JSON.parse(localStorage.getItem('moneyData')||'[]'); if(!data.length){alert('Belum ada data');return}
      const header = Object.keys(data[0]).join(',');
      const rows = data.map(r=>Object.values(r).map(v=>'"'+String(v).replace(/"/g,'""')+'"').join(','));
      const csv = [header].concat(rows).join('
');
      const blob = new Blob([csv],{type:'text/csv'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='money_data.csv'; a.click(); URL.revokeObjectURL(url);
    })

    const timeForm = $('timeForm'), timeList = $('timeList');
    function loadTimes(){ const data=JSON.parse(localStorage.getItem('timeData')||'[]'); timeList.innerHTML=''; data.slice().reverse().forEach(t=>{ const el=document.createElement('div'); el.className='item'; el.innerHTML = '<div style="min-width:0"><strong>' + (t.title||'') + '</strong><div class="meta">' + (t.repeat||'') + '</div></div><div style="text-align:right"><div class="meta">' + fmtDate(t.start) + '</div></div>'; timeList.appendChild(el) }) }
    loadTimes();

    timeForm.addEventListener('submit', e=>{ e.preventDefault(); const title = $('timeTitle').value; const start = $('timeStart').value; const end = $('timeEnd').value; const repeat = $('timeRepeat').value; if(!start){alert('Pilih tanggal mulai');return} const arr = JSON.parse(localStorage.getItem('timeData')||'[]'); arr.push({title,start,end,repeat}); localStorage.setItem('timeData',JSON.stringify(arr)); loadTimes(); timeForm.reset(); })

    $('addToCalendar').addEventListener('click', ()=>{
      const title = $('timeTitle').value || 'Event'; const start = $('timeStart').value; const end = $('timeEnd').value || start; if(!start){alert('Pilih tanggal mulai');return}
      const toGCal = s=> (new Date(s)).toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const s = toGCal(start); const e = toGCal(end);
      const url = 'https://calendar.google.com/calendar/render?action=TEMPLATE&text='+encodeURIComponent(title)+'&dates='+s+'/'+e;
      window.open(url,'_blank');
    })

    // build ICS safely using array and join
    $('exportICSBtn').addEventListener('click', ()=>{
      const title = $('timeTitle').value || 'Event'; const start = $('timeStart').value; const end = $('timeEnd').value || start; if(!start){alert('Pilih tanggal mulai');return}
      const formatICS = s => new Date(s).toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const lines = [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'BEGIN:VEVENT',
        'SUMMARY:' + title,
        'DTSTART:' + formatICS(start),
        'DTEND:' + formatICS(end),
        'END:VEVENT',
        'END:VCALENDAR'
      ];
      const ics = lines.join('
');
      const blob = new Blob([ics],{type:'text/calendar'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='event.ics'; a.click(); URL.revokeObjectURL(url);
    })

    const remForm = $('reminderForm'), remList = $('remList');
    function loadRems(){ const data = JSON.parse(localStorage.getItem('remData')||'[]'); remList.innerHTML=''; data.slice().reverse().forEach(r=>{ const el=document.createElement('div'); el.className='item'; el.innerHTML = '<div style="min-width:0"><strong>' + (r.msg||'') + '</strong><div class="meta">' + fmtDate(r.at) + '</div></div><div style="text-align:right" class="meta">' + (r.sound||'') + '</div>'; remList.appendChild(el) }) }
    loadRems();

    function scheduleAll(){ const data = JSON.parse(localStorage.getItem('remData')||'[]'); data.forEach(r=>{ const delay = new Date(r.at).getTime() - Date.now(); if(delay>0 && delay < 2147483647){ setTimeout(()=>triggerReminder(r), delay); } }) }
    function triggerReminder(r){ if('Notification' in window && Notification.permission==='granted'){ new Notification(r.msg,{body:fmtDate(r.at)}); } if(r.sound==='on'){ try{ const snd = new Audio('data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAA'); snd.play().catch(()=>{}); }catch(e){} } }

    remForm.addEventListener('submit', e=>{ e.preventDefault(); const msg = $('remMsg').value; const at = $('remAt').value; const sound = $('remSound').value; if(!msg||!at){alert('Isi message dan waktu');return} const arr = JSON.parse(localStorage.getItem('remData')||'[]'); arr.push({msg,at,sound}); localStorage.setItem('remData',JSON.stringify(arr)); loadRems(); scheduleAll(); remForm.reset(); })

    if('Notification' in window && Notification.permission==='default'){ Notification.requestPermission(); }
    $('testNotif').addEventListener('click', ()=>{ if('Notification' in window && Notification.permission!=='granted'){ Notification.requestPermission(); } try{ new Notification('Test Reminder',{body:'This is a test.'}); }catch(e){ alert('Notif tidak tersedia di browser ini'); } })
    scheduleAll();

    const notesList = $('notesList'); function loadNotes(){ const data = JSON.parse(localStorage.getItem('notes')||'[]'); notesList.innerHTML=''; data.slice().reverse().forEach(n=>{ const el = document.createElement('div'); el.className='item'; el.innerHTML = '<div style="min-width:0"><strong style="color:var(--green-500)">' + (n.title||'(no title)') + '</strong><div class="meta">' + fmtDate(n.at) + '</div></div><div style="text-align:right;max-width:40%"><div class="meta">' + ((n.content||'').slice(0,80)) + '</div></div>'; notesList.appendChild(el) }) }
    loadNotes();

    $('saveNote').addEventListener('click', ()=>{ const title = $('noteTitle').value; const content = $('noteContent').value; if(!content){alert('Isi dulu');return} const arr = JSON.parse(localStorage.getItem('notes')||'[]'); arr.push({title,content,at:new Date().toISOString()}); localStorage.setItem('notes',JSON.stringify(arr)); loadNotes(); $('noteTitle').value=''; $('noteContent').value=''; })

    $('shareNote').addEventListener('click', async ()=>{ const title = $('noteTitle').value || 'Catatan'; const content = $('noteContent').value || ''; const text = title + '

' + content; if(navigator.share){ try{ await navigator.share({title, text}); }catch(e){ alert('Share dibatalkan / tidak tersedia'); } } else { const blob = new Blob([text],{type:'text/plain'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'note.txt'; a.click(); URL.revokeObjectURL(url); } })

    window.addEventListener('load', ()=>{ document.querySelector('input')?.focus(); })
  </script>
</body>
</html>
